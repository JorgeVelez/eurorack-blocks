/*****************************************************************************

      TestSdramObject.cpp
      Copyright (c) 2020 Raphael DINGE

*Tab=3***********************************************************************/



/*\\\ INCLUDE FILES \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

#include "TestSdramObject.h"

#include "test.h"

#define erb_TARGET_VCV_RACK

#include "erb/SdramObject.h"



/*\\\ PUBLIC \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name : run
==============================================================================
*/

void  TestSdramObject::run ()
{
   run_001 ();
}



/*\\\ PROTECTED \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/



/*\\\ PRIVATE \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name : run_001
==============================================================================
*/

void  TestSdramObject::run_001 ()
{
   {
      auto object = erb::make_sdram_object <A> ();
      object->a = 1;
      A & obj = *object;
      erb_TEST (obj.a == 1);
   }

   {
      auto object = erb::make_sdram_object <A> ();
      object->a = 1;

      auto object2 = std::move (object);

      erb_TEST (object.operator -> () == nullptr);

      A & obj = *object2;
      erb_TEST (obj.a == 1);
   }
}



/*\\\ EOF \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/
