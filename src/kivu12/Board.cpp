/*****************************************************************************

      Board.cpp
      Copyright (c) 2020 Raphael DINGE

*Tab=3***********************************************************************/



/*\\\ INCLUDE FILES \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

#include "erb/kivu12/Board.h"



namespace erb
{
namespace kivu12
{



/*\\\ PUBLIC \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name : ctor
==============================================================================
*/

Board::Board ()
{
   init_adc_channels ();
}



/*\\\ INTERNAL \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/



/*\\\ PROTECTED \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name : do_notify_audio_buffer_start
==============================================================================
*/

void  Board::do_notify_audio_buffer_start ()
{
   // convert all platform inputs to control inputs
}



/*
==============================================================================
Name : do_notify_audio_buffer_end
==============================================================================
*/

void  Board::do_notify_audio_buffer_end ()
{
   // convert all control outputs to platform outputs 
}



/*\\\ PRIVATE \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name : init_adc_channels
==============================================================================
*/

void  Board::init_adc_channels ()
{
   _adcs = do_init_adc_channels ({
      {AdcPin1},
      {AdcPin9, Pin19, Pin20, Pin21},
   });

   for (size_t i = 0 ; i < 24 ; ++i)
   {
      map (_adcs [i], _cifs [i]);
   }
}



/*
==============================================================================
Name : map
==============================================================================
*/

void  Board::map (const float & val, ControlInputFloat * control_ptr)
{
   if (control_ptr != nullptr)
   {
      control_ptr->impl_bind_data (val);
   }
}



}  // namespace kivu12
}  // namespace erb



/*\\\ EOF \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/
